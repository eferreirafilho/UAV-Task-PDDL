; Define the problem
; Only one sensor in a specific waypoint
; Only one "Surface Waypoint"
(define (problem p01)
    (:domain
        demeter-domain
    )
    (:objects
        ;Surface Waypoints
        ;cable_start sensor_surface_waypoint - Waypoint
        
        ;Cable Waypoints Sensors
        ;waypoint1 waypoint2 waypoint3 waypoint4 waypoint5 waypoint6 waypoint7 waypoint8 waypoint9 waypoint10 - Waypoint
        wp1 - Waypoint
        wp2 wp3 wp4 wp5 wp6 wp7 wp8 wp9 wp10 wp11 wp12 wp13 wp14 wp15 wp16 wp17 wp18 wp19 wp20 wp21 wp22 wp23 wp24 wp25 wp26 wp27 wp28 wp29 wp30 wp31 wp32 wp33 wp34 wp35 wp36 wp37 wp38 wp39 wp40 wp41 wp42 wp43 wp44 wp45 wp46 wp47 wp48 wp49 wp50 wp51 wp52 wp53 wp54 - Waypoint
        
        ;Data from sensor
        data1 - Data

        ;robot
        vehicle1 - Vehicle
    )
    (:init

        ; Initialize battery capacity
        (= (battery-capacity) 100)
        ;(can-move cable_start waypoint1) (can-move waypoint1 waypoint2) (can-move waypoint2 waypoint3) (can-move waypoint3 waypoint4) (can-move waypoint4 waypoint5) (can-move waypoint5 waypoint6) (can-move waypoint6 waypoint7) (can-move waypoint7 waypoint8) (can-move waypoint8 waypoint9) (can-move waypoint9 waypoint10)
        ;(can-move waypoint1 cable_start) (can-move waypoint2 waypoint1) (can-move waypoint3 waypoint2) (can-move waypoint4 waypoint3) (can-move waypoint5 waypoint4) (can-move waypoint6 waypoint5) (can-move waypoint7 waypoint6) (can-move waypoint8 waypoint7) (can-move waypoint9 waypoint8) (can-move waypoint10 waypoint9)
        ; Define allowed moviments from underwater sensors to surface waypoints
        ;(can-move waypoint1 sensor_surface_waypoint) (can-move waypoint2 sensor_surface_waypoint) (can-move waypoint3 sensor_surface_waypoint) (can-move waypoint4 sensor_surface_waypoint) (can-move waypoint5 sensor_surface_waypoint) (can-move waypoint6 sensor_surface_waypoint) (can-move waypoint7 sensor_surface_waypoint)(can-move waypoint8 sensor_surface_waypoint) (can-move waypoint9 sensor_surface_waypoint) (can-move waypoint10 sensor_surface_waypoint)
        ; Allow moviment from surface to cable start
        ;(can-move sensor_surface_waypoint cable_start)        
        
        ; define allowed moviment from waypoints and its costs
        (can-move wp1 wp2) (= (traverse-cost vehicle1 wp1 wp2) 0.798604)
        (can-move wp1 wp6) (= (traverse-cost vehicle1 wp1 wp6) 2.811434)
        (can-move wp2 wp1) (= (traverse-cost vehicle1 wp2 wp1) 0.798604)
        (can-move wp2 wp3) (= (traverse-cost vehicle1 wp2 wp3) 0.638978)
        (can-move wp2 wp9) (= (traverse-cost vehicle1 wp2 wp9) 2.157437)
        (can-move wp2 wp12) (= (traverse-cost vehicle1 wp2 wp12) 2.229869)
        (can-move wp3 wp2) (= (traverse-cost vehicle1 wp3 wp2) 0.638978)
        (can-move wp3 wp4) (= (traverse-cost vehicle1 wp3 wp4) 0.666231)
        (can-move wp3 wp13) (= (traverse-cost vehicle1 wp3 wp13) 1.620365)
        (can-move wp3 wp17) (= (traverse-cost vehicle1 wp3 wp17) 1.692524)
        (can-move wp4 wp3) (= (traverse-cost vehicle1 wp4 wp3) 0.666231)
        (can-move wp4 wp5) (= (traverse-cost vehicle1 wp4 wp5) 0.523435)
        (can-move wp4 wp18) (= (traverse-cost vehicle1 wp4 wp18) 1.104111)
        (can-move wp4 wp22) (= (traverse-cost vehicle1 wp4 wp22) 1.165274)
        (can-move wp5 wp4) (= (traverse-cost vehicle1 wp5 wp4) 0.523435)
        (can-move wp5 wp7) (= (traverse-cost vehicle1 wp5 wp7) 0.439375)
        (can-move wp5 wp24) (= (traverse-cost vehicle1 wp5 wp24) 0.770398)
        (can-move wp5 wp28) (= (traverse-cost vehicle1 wp5 wp28) 0.836489)
        (can-move wp6 wp1) (= (traverse-cost vehicle1 wp6 wp1) 2.811434)
        (can-move wp6 wp10) (= (traverse-cost vehicle1 wp6 wp10) 0.631951)
        (can-move wp6 wp15) (= (traverse-cost vehicle1 wp6 wp15) 0.796245)
        (can-move wp6 wp32) (= (traverse-cost vehicle1 wp6 wp32) 0.883109)
        (can-move wp7 wp5) (= (traverse-cost vehicle1 wp7 wp5) 0.439375)
        (can-move wp7 wp30) (= (traverse-cost vehicle1 wp7 wp30) 0.577052)
        (can-move wp7 wp33) (= (traverse-cost vehicle1 wp7 wp33) 1.697890)
        (can-move wp7 wp45) (= (traverse-cost vehicle1 wp7 wp45) 0.806410)
        (can-move wp8 wp9) (= (traverse-cost vehicle1 wp8 wp9) 0.200496)
        (can-move wp8 wp10) (= (traverse-cost vehicle1 wp8 wp10) 0.125925)
        (can-move wp9 wp2) (= (traverse-cost vehicle1 wp9 wp2) 2.157437)
        (can-move wp9 wp8) (= (traverse-cost vehicle1 wp9 wp8) 0.200496)
        (can-move wp9 wp11) (= (traverse-cost vehicle1 wp9 wp11) 0.200496)
        (can-move wp9 wp12) (= (traverse-cost vehicle1 wp9 wp12) 0.072432)
        (can-move wp10 wp6) (= (traverse-cost vehicle1 wp10 wp6) 0.631951)
        (can-move wp10 wp8) (= (traverse-cost vehicle1 wp10 wp8) 0.125925)
        (can-move wp10 wp15) (= (traverse-cost vehicle1 wp10 wp15) 0.164293)
        (can-move wp10 wp16) (= (traverse-cost vehicle1 wp10 wp16) 0.125925)
        (can-move wp11 wp9) (= (traverse-cost vehicle1 wp11 wp9) 0.200496)
        (can-move wp11 wp13) (= (traverse-cost vehicle1 wp11 wp13) 0.190513)
        (can-move wp12 wp2) (= (traverse-cost vehicle1 wp12 wp2) 2.229869)
        (can-move wp12 wp9) (= (traverse-cost vehicle1 wp12 wp9) 0.072432)
        (can-move wp12 wp15) (= (traverse-cost vehicle1 wp12 wp15) 0.132574)
        (can-move wp12 wp21) (= (traverse-cost vehicle1 wp12 wp21) 0.315134)
        (can-move wp13 wp3) (= (traverse-cost vehicle1 wp13 wp3) 1.620365)
        (can-move wp13 wp11) (= (traverse-cost vehicle1 wp13 wp11) 0.190513)
        (can-move wp13 wp14) (= (traverse-cost vehicle1 wp13 wp14) 0.190513)
        (can-move wp13 wp17) (= (traverse-cost vehicle1 wp13 wp17) 0.072158)
        (can-move wp14 wp13) (= (traverse-cost vehicle1 wp14 wp13) 0.190513)
        (can-move wp14 wp18) (= (traverse-cost vehicle1 wp14 wp18) 0.212834)
        (can-move wp15 wp6) (= (traverse-cost vehicle1 wp15 wp6) 0.796245)
        (can-move wp15 wp10) (= (traverse-cost vehicle1 wp15 wp10) 0.164293)
        (can-move wp15 wp12) (= (traverse-cost vehicle1 wp15 wp12) 0.132574)
        (can-move wp15 wp19) (= (traverse-cost vehicle1 wp15 wp19) 0.076302)
        (can-move wp15 wp49) (= (traverse-cost vehicle1 wp15 wp49) 0.632045)
        (can-move wp16 wp10) (= (traverse-cost vehicle1 wp16 wp10) 0.125925)
        (can-move wp16 wp19) (= (traverse-cost vehicle1 wp16 wp19) 0.192425)
        (can-move wp17 wp3) (= (traverse-cost vehicle1 wp17 wp3) 1.692524)
        (can-move wp17 wp13) (= (traverse-cost vehicle1 wp17 wp13) 0.072158)
        (can-move wp17 wp21) (= (traverse-cost vehicle1 wp17 wp21) 0.153023)
        (can-move wp17 wp27) (= (traverse-cost vehicle1 wp17 wp27) 0.328981)
        (can-move wp18 wp4) (= (traverse-cost vehicle1 wp18 wp4) 1.104111)
        (can-move wp18 wp14) (= (traverse-cost vehicle1 wp18 wp14) 0.212834)
        (can-move wp18 wp20) (= (traverse-cost vehicle1 wp18 wp20) 0.212834)
        (can-move wp18 wp22) (= (traverse-cost vehicle1 wp18 wp22) 0.061163)
        (can-move wp19 wp15) (= (traverse-cost vehicle1 wp19 wp15) 0.076302)
        (can-move wp19 wp16) (= (traverse-cost vehicle1 wp19 wp16) 0.192425)
        (can-move wp19 wp23) (= (traverse-cost vehicle1 wp19 wp23) 0.192425)
        (can-move wp19 wp49) (= (traverse-cost vehicle1 wp19 wp49) 0.555743)
        (can-move wp20 wp18) (= (traverse-cost vehicle1 wp20 wp18) 0.212834)
        (can-move wp20 wp24) (= (traverse-cost vehicle1 wp20 wp24) 0.193062)
        (can-move wp21 wp12) (= (traverse-cost vehicle1 wp21 wp12) 0.315134)
        (can-move wp21 wp17) (= (traverse-cost vehicle1 wp21 wp17) 0.153023)
        (can-move wp21 wp25) (= (traverse-cost vehicle1 wp21 wp25) 0.067701)
        (can-move wp21 wp31) (= (traverse-cost vehicle1 wp21 wp31) 0.146290)
        (can-move wp22 wp4) (= (traverse-cost vehicle1 wp22 wp4) 1.165274)
        (can-move wp22 wp18) (= (traverse-cost vehicle1 wp22 wp18) 0.061163)
        (can-move wp22 wp27) (= (traverse-cost vehicle1 wp22 wp27) 0.155855)
        (can-move wp22 wp35) (= (traverse-cost vehicle1 wp22 wp35) 0.332623)
        (can-move wp23 wp19) (= (traverse-cost vehicle1 wp23 wp19) 0.192425)
        (can-move wp23 wp25) (= (traverse-cost vehicle1 wp23 wp25) 0.196003)
        (can-move wp24 wp5) (= (traverse-cost vehicle1 wp24 wp5) 0.770398)
        (can-move wp24 wp20) (= (traverse-cost vehicle1 wp24 wp20) 0.193062)
        (can-move wp24 wp26) (= (traverse-cost vehicle1 wp24 wp26) 0.193062)
        (can-move wp24 wp28) (= (traverse-cost vehicle1 wp24 wp28) 0.066092)
        (can-move wp25 wp21) (= (traverse-cost vehicle1 wp25 wp21) 0.067701)
        (can-move wp25 wp23) (= (traverse-cost vehicle1 wp25 wp23) 0.196003)
        (can-move wp25 wp29) (= (traverse-cost vehicle1 wp25 wp29) 0.196003)
        (can-move wp25 wp31) (= (traverse-cost vehicle1 wp25 wp31) 0.078589)
        (can-move wp26 wp24) (= (traverse-cost vehicle1 wp26 wp24) 0.193062)
        (can-move wp26 wp30) (= (traverse-cost vehicle1 wp26 wp30) 0.212350)
        (can-move wp26 wp36) (= (traverse-cost vehicle1 wp26 wp36) 0.131826)
        (can-move wp27 wp17) (= (traverse-cost vehicle1 wp27 wp17) 0.328981)
        (can-move wp27 wp22) (= (traverse-cost vehicle1 wp27 wp22) 0.155855)
        (can-move wp27 wp39) (= (traverse-cost vehicle1 wp27 wp39) 0.136373)
        (can-move wp28 wp5) (= (traverse-cost vehicle1 wp28 wp5) 0.836489)
        (can-move wp28 wp24) (= (traverse-cost vehicle1 wp28 wp24) 0.066092)
        (can-move wp28 wp35) (= (traverse-cost vehicle1 wp28 wp35) 0.147051)
        (can-move wp28 wp36) (= (traverse-cost vehicle1 wp28 wp36) 0.155766)
        (can-move wp28 wp45) (= (traverse-cost vehicle1 wp28 wp45) 0.439173)
        (can-move wp29 wp25) (= (traverse-cost vehicle1 wp29 wp25) 0.196003)
        (can-move wp29 wp38) (= (traverse-cost vehicle1 wp29 wp38) 0.146766)
        (can-move wp30 wp7) (= (traverse-cost vehicle1 wp30 wp7) 0.577052)
        (can-move wp30 wp26) (= (traverse-cost vehicle1 wp30 wp26) 0.212350)
        (can-move wp30 wp34) (= (traverse-cost vehicle1 wp30 wp34) 0.212350)
        (can-move wp30 wp45) (= (traverse-cost vehicle1 wp30 wp45) 0.229358)
        (can-move wp31 wp21) (= (traverse-cost vehicle1 wp31 wp21) 0.146290)
        (can-move wp31 wp25) (= (traverse-cost vehicle1 wp31 wp25) 0.078589)
        (can-move wp31 wp38) (= (traverse-cost vehicle1 wp31 wp38) 0.151832)
        (can-move wp31 wp43) (= (traverse-cost vehicle1 wp31 wp43) 0.326166)
        (can-move wp31 wp49) (= (traverse-cost vehicle1 wp31 wp49) 0.634371)
        (can-move wp32 wp6) (= (traverse-cost vehicle1 wp32 wp6) 0.883109)
        (can-move wp32 wp50) (= (traverse-cost vehicle1 wp32 wp50) 0.974368)
        (can-move wp33 wp7) (= (traverse-cost vehicle1 wp33 wp7) 1.697890)
        (can-move wp33 wp51) (= (traverse-cost vehicle1 wp33 wp51) 1.816935)
        (can-move wp34 wp30) (= (traverse-cost vehicle1 wp34 wp30) 0.212350)
        (can-move wp35 wp22) (= (traverse-cost vehicle1 wp35 wp22) 0.332623)
        (can-move wp35 wp28) (= (traverse-cost vehicle1 wp35 wp28) 0.147051)
        (can-move wp35 wp40) (= (traverse-cost vehicle1 wp35 wp40) 0.067949)
        (can-move wp35 wp48) (= (traverse-cost vehicle1 wp35 wp48) 0.286190)
        (can-move wp36 wp26) (= (traverse-cost vehicle1 wp36 wp26) 0.131826)
        (can-move wp36 wp28) (= (traverse-cost vehicle1 wp36 wp28) 0.155766)
        (can-move wp36 wp41) (= (traverse-cost vehicle1 wp36 wp41) 0.131826)
        (can-move wp36 wp45) (= (traverse-cost vehicle1 wp36 wp45) 0.283407)
        (can-move wp37 wp40) (= (traverse-cost vehicle1 wp37 wp40) 0.191846)
        (can-move wp37 wp42) (= (traverse-cost vehicle1 wp37 wp42) 0.140894)
        (can-move wp38 wp29) (= (traverse-cost vehicle1 wp38 wp29) 0.146766)
        (can-move wp38 wp31) (= (traverse-cost vehicle1 wp38 wp31) 0.151832)
        (can-move wp38 wp43) (= (traverse-cost vehicle1 wp38 wp43) 0.174334)
        (can-move wp38 wp44) (= (traverse-cost vehicle1 wp38 wp44) 0.146766)
        (can-move wp39 wp27) (= (traverse-cost vehicle1 wp39 wp27) 0.136373)
        (can-move wp39 wp42) (= (traverse-cost vehicle1 wp39 wp42) 0.174316)
        (can-move wp39 wp43) (= (traverse-cost vehicle1 wp39 wp43) 0.164265)
        (can-move wp39 wp48) (= (traverse-cost vehicle1 wp39 wp48) 0.428448)
        (can-move wp40 wp35) (= (traverse-cost vehicle1 wp40 wp35) 0.067949)
        (can-move wp40 wp37) (= (traverse-cost vehicle1 wp40 wp37) 0.191846)
        (can-move wp40 wp41) (= (traverse-cost vehicle1 wp40 wp41) 0.191846)
        (can-move wp40 wp48) (= (traverse-cost vehicle1 wp40 wp48) 0.218242)
        (can-move wp41 wp36) (= (traverse-cost vehicle1 wp41 wp36) 0.131826)
        (can-move wp41 wp40) (= (traverse-cost vehicle1 wp41 wp40) 0.191846)
        (can-move wp42 wp37) (= (traverse-cost vehicle1 wp42 wp37) 0.140894)
        (can-move wp42 wp39) (= (traverse-cost vehicle1 wp42 wp39) 0.174316)
        (can-move wp42 wp47) (= (traverse-cost vehicle1 wp42 wp47) 0.140894)
        (can-move wp42 wp48) (= (traverse-cost vehicle1 wp42 wp48) 0.254132)
        (can-move wp43 wp31) (= (traverse-cost vehicle1 wp43 wp31) 0.326166)
        (can-move wp43 wp38) (= (traverse-cost vehicle1 wp43 wp38) 0.174334)
        (can-move wp43 wp39) (= (traverse-cost vehicle1 wp43 wp39) 0.164265)
        (can-move wp43 wp46) (= (traverse-cost vehicle1 wp43 wp46) 0.068792)
        (can-move wp43 wp53) (= (traverse-cost vehicle1 wp43 wp53) 1.755599)
        (can-move wp44 wp38) (= (traverse-cost vehicle1 wp44 wp38) 0.146766)
        (can-move wp44 wp46) (= (traverse-cost vehicle1 wp44 wp46) 0.217256)
        (can-move wp45 wp7) (= (traverse-cost vehicle1 wp45 wp7) 0.806410)
        (can-move wp45 wp28) (= (traverse-cost vehicle1 wp45 wp28) 0.439173)
        (can-move wp45 wp30) (= (traverse-cost vehicle1 wp45 wp30) 0.229358)
        (can-move wp45 wp36) (= (traverse-cost vehicle1 wp45 wp36) 0.283407)
        (can-move wp45 wp51) (= (traverse-cost vehicle1 wp45 wp51) 0.455618)
        (can-move wp46 wp43) (= (traverse-cost vehicle1 wp46 wp43) 0.068792)
        (can-move wp46 wp44) (= (traverse-cost vehicle1 wp46 wp44) 0.217256)
        (can-move wp46 wp47) (= (traverse-cost vehicle1 wp46 wp47) 0.217256)
        (can-move wp46 wp53) (= (traverse-cost vehicle1 wp46 wp53) 1.686807)
        (can-move wp47 wp42) (= (traverse-cost vehicle1 wp47 wp42) 0.140894)
        (can-move wp47 wp46) (= (traverse-cost vehicle1 wp47 wp46) 0.217256)
        (can-move wp48 wp35) (= (traverse-cost vehicle1 wp48 wp35) 0.286190)
        (can-move wp48 wp39) (= (traverse-cost vehicle1 wp48 wp39) 0.428448)
        (can-move wp48 wp40) (= (traverse-cost vehicle1 wp48 wp40) 0.218242)
        (can-move wp48 wp42) (= (traverse-cost vehicle1 wp48 wp42) 0.254132)
        (can-move wp48 wp52) (= (traverse-cost vehicle1 wp48 wp52) 0.836231)
        (can-move wp49 wp15) (= (traverse-cost vehicle1 wp49 wp15) 0.632045)
        (can-move wp49 wp19) (= (traverse-cost vehicle1 wp49 wp19) 0.555743)
        (can-move wp49 wp31) (= (traverse-cost vehicle1 wp49 wp31) 0.634371)
        (can-move wp49 wp50) (= (traverse-cost vehicle1 wp49 wp50) 0.360824)
        (can-move wp50 wp32) (= (traverse-cost vehicle1 wp50 wp32) 0.974368)
        (can-move wp50 wp49) (= (traverse-cost vehicle1 wp50 wp49) 0.360824)
        (can-move wp50 wp53) (= (traverse-cost vehicle1 wp50 wp53) 1.421223)
        (can-move wp51 wp33) (= (traverse-cost vehicle1 wp51 wp33) 1.816935)
        (can-move wp51 wp45) (= (traverse-cost vehicle1 wp51 wp45) 0.455618)
        (can-move wp51 wp52) (= (traverse-cost vehicle1 wp51 wp52) 0.630863)
        (can-move wp52 wp48) (= (traverse-cost vehicle1 wp52 wp48) 0.836231)
        (can-move wp52 wp51) (= (traverse-cost vehicle1 wp52 wp51) 0.630863)
        (can-move wp52 wp54) (= (traverse-cost vehicle1 wp52 wp54) 1.802730)
        (can-move wp53 wp43) (= (traverse-cost vehicle1 wp53 wp43) 1.755599)
        (can-move wp53 wp46) (= (traverse-cost vehicle1 wp53 wp46) 1.686807)
        (can-move wp53 wp50) (= (traverse-cost vehicle1 wp53 wp50) 1.421223)
        (can-move wp53 wp54) (= (traverse-cost vehicle1 wp53 wp54) 0.908478)
        (can-move wp54 wp52) (= (traverse-cost vehicle1 wp54 wp52) 1.802730)
        (can-move wp54 wp53) (= (traverse-cost vehicle1 wp54 wp53) 0.908478)

        
        ; Define data in sensors
        (is-in data1 wp53); (is-in data2 waypoint5)
        ; Define transmit data positions (cable start and surface waypoints)
        (is-at-surface wp1) (is-at-surface wp2) (is-at-surface wp3) (is-at-surface wp4) (is-at-surface wp5) (is-at-surface wp6) (is-at-surface wp7)
        (empty vehicle1); (empty vehicle2); demeter start without data
        (at vehicle1 wp1); (at vehicle2 cable_start); demeter start at cable start
        (= (battery-amount vehicle1) 50); (= (battery-amount vehicle2) 10) ; initial battery
        (= (recharge-rate vehicle1) 1); (= (recharge-rate vehicle2) 1) ; recharge rate
        
    )
    (:goal
        (and
            (data-sent data1); (data-sent data2) ; Data have been sent
            (at vehicle1 wp1) ; vehicle has to finish in the surface
            (= (battery-amount vehicle1) 100) ; Finish with full battery
        )
    )

    (:metric 
        minimize (total-time)
        ;minimize (sum-traverse-cost)
        ;maximize (battery-amount vehicle1)
    )
)